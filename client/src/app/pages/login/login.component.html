<!-- https://auth0.com/blog/angular-2-authentication/ -->

<div class="container" style="margin-top: 4.5em; padding-bottom: 1em; padding-top: 1em; background: white;">

    <h3>Authentication</h3>
    <nz-card *ngIf="!isAuth" nzHoverable style="border-radius: 5px;" [nzLoading]="isLoading">
        <nz-row>
            <div nz-col [nzSpan]="12" [nzOffset]=8>
                <form *ngIf="isLoginForm" nz-form [formGroup]="loginForm" class="login-form" (ngSubmit)="submitLoginForm(loginForm.value)">
                    <nz-form-item>
                        <nz-form-control nzErrorTip="Please input your username!">
                            <nz-input-group nzPrefixIcon="user">
                                <input type="text" nz-input formControlName="email" placeholder="Email" />
                            </nz-input-group>
                        </nz-form-control>
                    </nz-form-item>
                    <nz-form-item>
                        <nz-form-control nzErrorTip="Please input your Password!">
                            <nz-input-group nzPrefixIcon="lock">
                                <input type="password" nz-input formControlName="password" placeholder="Password" />
                            </nz-input-group>
                        </nz-form-control>
                    </nz-form-item>
                    <nz-form-item>
                        <nz-form-control>
                            <button nz-button class="login-form-button" [nzType]="'primary'">Log in</button>
                        </nz-form-control>
                        <a class="login-form-forgot" (click)="switchAuthentication();" class="login-form-forgot">Or
                            register now!</a>
                    </nz-form-item>
                </form>

                <form *ngIf="!isLoginForm" nz-form [formGroup]="registerForm" class="login-form" (ngSubmit)="submitRegisterForm(registerForm.value)">
                    <nz-form-item>
                        <nz-form-control nzErrorTip="Please input your username!">
                            <nz-input-group nzPrefixIcon="user">
                                <input type="text" nz-input formControlName="name" placeholder="Username" />
                            </nz-input-group>
                        </nz-form-control>
                    </nz-form-item>

                    <nz-form-item>
                        <nz-form-control nzErrorTip="Please input your email address!">
                            <nz-input-group nzPrefixIcon="mail">
                                <input type="text" nz-input formControlName="email" placeholder="Email" />
                            </nz-input-group>
                        </nz-form-control>
                    </nz-form-item>

                    <nz-form-item>
                        <nz-form-control nzErrorTip="Please input your Password!">
                            <nz-input-group nzPrefixIcon="lock">
                                <input type="password" nz-input formControlName="password" placeholder="Password" />
                            </nz-input-group>
                        </nz-form-control>
                    </nz-form-item>
                    <nz-form-item>
                        <nz-form-control>
                            <button nz-button class="login-form-button" [nzType]="'primary'">Register</button>
                        </nz-form-control>
                        Or
                        <a (click)="switchAuthentication();">login</a>
                    </nz-form-item>
                </form>
            </div>
        </nz-row>
    </nz-card>

    <nz-card *ngIf="isAuth" nzHoverable style="border-radius: 5px;" [nzLoading]="isLoading">
        <nz-result [nzIcon]="'smile-twotone'" [nzTitle]="'You are authenticated!'">
            <div nz-result-extra>
                <button *ngIf="!isAccountVisible" nz-button nzType="primary" (click)="getAccountInfo()">Get account
                    details</button>

                <div class="container" style="margin-top: 1em;">
                    <input nz-input style="margin: 0.5em;" placeholder="Email" [(ngModel)]="accountEmail" [disabled]="true" />
                    <input nz-input style="margin: 0.5em;" placeholder="Name" [(ngModel)]="accountName" [disabled]="true" />
                    <input nz-input style="margin: 0.5em;" placeholder="Session token" [(ngModel)]="accountToken" [disabled]="true" />
                </div>
            </div>
        </nz-result>
    </nz-card>

</div>